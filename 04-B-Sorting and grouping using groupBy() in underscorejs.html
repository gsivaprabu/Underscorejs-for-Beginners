<!DOCTYPE html>
<html>

<head>
    <title>Sorting, Grouping, Counting Collections with groupBy() & for() loop in Underscore</title>
    <script type="text/javascript" src="lib/underscore.js"></script>
    <script type="text/javascript" src="data/data.js"></script>
    <script type="text/javascript">
    function getStudentInfo(elem, indx, list) {
        var container = document.getElementById('container');
        var student = "<p>" + elem.firstname + " " + elem.lastname + ", Grade " + elem.grade;
        container.innerHTML = container.innerHTML + student;
    }

    function groupStudentsBySchool(item) {
        console.group("SCHOOL");
        console.log(item.school);
        console.groupEnd();
        return item.school;
    }

    window.addEventListener("load", function(e) {
        /* grouping students by school */
        var grouped = _.groupBy(students, groupStudentsBySchool);
        // console.table(grouped);
        console.log(JSON.stringify(grouped))
        for (i in grouped) {
            console.log(i);
            var container = document.getElementById("container");
            var school = "<p style='font-weight:bold'>Students that go to: " + i + "</p>";
            container.innerHTML = container.innerHTML + school;
            _.each(grouped[i], getStudentInfo);
        }

    });
    </script>
</head>

<body>
    <h1>Sorting, Grouping, Counting Collections with groupBy() & for() loop in Underscore</h1>
    <p>
        <ol>
            <li>using _.groupBy </li>
            <li>using for() loop </li>
        </ol>
    </p>
    <h2>Student Information</h2>
    <h3 id="numstudents">Number of students :   </h3>
    <div id="container"></div>
</body>

</html>
